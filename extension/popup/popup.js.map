{"version":3,"file":"popup.js","sources":["../../src/popup/data.ts","../../src/popup/mode-handler.ts","../../src/popup/version.ts","../../src/popup/settings.ts","../../src/popup/utils.ts","../../src/background/utils/normalize-text.ts","../../src/popup/index.ts","../../src/background/core/get-response.ts"],"sourcesContent":[null,null,null,null,null,null,null,null],"names":["globalData","actualMode","inputsCheckbox","modes","document","querySelector","querySelectorAll","toExcludes","disabledForThisMode","autocomplete","clipboard","handleModeChange","needDisable","dontNeedDisable","filter","input","includes","id","parentElement","style","display","button","addEventListener","value","mode","classList","add","remove","CURRENT_VERSION","versionDisplay","setVersion","version","isCurrent","textContent","link","createElement","href","rel","target","appendChild","createTextNode","async","lastVersion","req","fetch","json","getLastVersion","catch","err","console","error","lastVertionSplitted","split","currentVersionSplitted","minVersionLength","Math","min","length","i","parseInt","notifyUpdate","settings","advencedSettings","switchSettings","showMessage","msg","isError","isInfinite","message","color","setTimeout","normalizeText","text","toLowerCase","replace","trim","event","preventDefault","saveBtn","testBtn","Error","inputsText","values","map","selector","apiKey","model","code","baseURL","maxTokens","includeImagesCheckbox","supportsImage","res","headers","Authorization","ok","data","normalizeModelId","modelInfo","find","m","hugging_face_id","architecture","input_modalities","log","warn","disabled","checked","checkboxValues","element","logs","title","cursor","typing","mouseover","infinite","timeout","history","includeImages","chrome","storage","sync","set","moodleGPT","undefined","get","then","config","forEach","key","cfg","question","controller","AbortController","timeoutControler","abort","contentHandler","messages","role","content","OR_API_URL","response","method","body","JSON","stringify","max_tokens","signal","clearTimeout","status","result","choices","saveResponse","normalizedResponse","getResponse"],"mappings":"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"}